### 1. 安装 CentOS 6 (最小化安装)

1. 选择手动安装
2. 激活网卡
3. 修改时区
4. 设置 root 用户密码
5. 确认安装, 等待安装完成

### 2. 初始化系统

`yum install xx --downloadonly --downloaddir=dir`

#### 2.1 安装系统基础工具

1. 首先编辑系统网卡设置, 设置其为自动启动.
    
    ```
    # 查找网卡配置文件
    ls /etc/sysconfig/network-scripts/ | grep ifcfg
    
    # 编辑网卡配置文件
    vi /etc/sysconfig/network-scripts/ifcfg-ens33
    
    # 将 ONBOOT 的值设置为 yes
    ONBOOT=yes
    
    # 重启系统
    reboot
    
    # 验证是否启动, 并查看 ip 地址
    ip addr show
    
    # ens33: inet 192.168.76.132
    ```

2. 修改 SELINUX 设置, 设置防火墙
    
    ```
    # getenforce 检查 SELINUX 状态
    
    sed -i '/^SELINUX=.*/c SELINUX=disabled' /etc/selinux/config
    sed -i 's/^SELINUXTYPE=.*/SELINUXTYPE=disabled/g' /etc/selinux/config
    grep --color=auto '^SELINUX' /etc/selinux/config
    setenforce 0
    
    # 关闭防火墙
    service iptables stop
    chkconfig iptables off
    ```

3. 安装 openssh, 然后使用其他终端通过 ssh 连接本机 

    ```
    # 安装 openssh
    yum install openssh
    
    # 测试是否运行
    service sshd status
    ```
    
4. 安装 net-tools, wget, epel-release, Development Tools

    ```
    # 安装 net-tools
    yum install net-tools
    
    # 安装 wget
    yum install wget
    
    # 安装 epel-release
    yum install epel-release
    
    # 安装 Development Tools
    yum groupinstall "Development Tools"
    ```
    
5. 安装 python34, python34-pip, python34-devel, python2-pip, python-devel

    > Centos 6.5 中默认 python 版本为 2.6. 安装 python-pip

    ```
    yum install python34 python34-pip python34-devel python2-pip python-devel
    ```
    
6. 安装 MySQL 5.7 
    
    See `https://dev.mysql.com/doc/refman/5.7/en/linux-installation-yum-repo.html`
    
    ```
    # 下载 MySQL yum repository
    wget https://repo.mysql.com//mysql57-community-release-el7-11.noarch.rpm
    
    # 查看当前激活的 MySQL community server 
    yum repolist enabled | grep "mysql.*-community.*"
    
    # CentOS 7
    # 激活相应版本的 mysql
    # sudo yum-config-manager --disable mysql80-community
    # sudo yum-config-manager --enable mysql57-community
    
    # CentOS 6.5
    # 激活相应版本的 mysql
    # 编辑配置文件 /etc/yum.repos.d/mysql-community.repo
    # 修改相应 mysql 版本的 enabled=1 即可
    
    # 安装 MySQL-community-server
    yum install mysql-community-server
    
    # 启动 MySQL
    sudo service mysqld start
    
    # 修改密码
    raw=`sudo grep 'temporary password' /var/log/mysqld.log`
    passwd=`echo ${raw} | sed 's/.*: //g'`
    echo ${passwd}
    mysql -uroot -p${passwd}
    ```
    
7. 安装 docker 

    > CentOS 6.5 下 docker 是 docker-io, 版本是 1.7. CentOS 7 docker 最新版本为 18.03
    >
    > `https://docs.docker.com/v1.7/`

    ```
    # 安装 docker-io
    yum install docker-io
    
    # 运行 docker 服务
    service docker start
    
    # 令 docker 随系统启动
    chkconfig docker on
    ```
    
8. 安装 Redis

    > CentOS 7/6.5 yum 版本均为 3.2
    
    ```
    yum install redis
    
    service redis start
    service redis status
    ```
    
9. 安装 Nginx

    > CentOS 7 yum 版本为 1.12, CentOS 6.5 yum 版本为 1.10

    ```
    yum install nginx
    
    service nginx start
    service nginx status
    ```
    
10. 安装 supervisor

    > CentOS 7 yum 版本为 3.1, CentOS 6.5 yum 版本为 2.1 
    
    ```
    # 使用 pip 安装
    pip install supervisor
    
    # 测试安装是否成功
    echo_supervisord_conf
    
    # 如果提示 meld3>=0.6.5 错误, 修改文件, 将其中的 meld3>=0.6.5 注释
    vi /usr/lib/python2.*/site-packages/supervisor-3.*.*-py2.6.egg-info/requires.txt
    ```
    
11. 安装 uwsgi

    > CentOS 7/6.5 yum 版本均为 2.0

    
    ```
    yum install uwsgi
    ```
    
12. 安装 DocxFactory