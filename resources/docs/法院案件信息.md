
## 1. 起诉状/答辩状 OCR 识别接口请求

### 1.1 交互方式:

1. 用户在电子卷宗系统上传起诉状后, 电子卷宗进行 OCR 识别, 提取结构化数据, 推送到文书系统.
2. 文书系统成功接收到推送后, 返回成功信息.

结构化信息包括:

- 基本信息
- 原被告,第三人信息
- 案由和诉讼请求

备注:

> 演示时会预先确定经办法院和案号, 不需要识别.

### 1.2 推送的结构化信息 JSON 字段:

```json
{
    "基本信息": {
        "经办法院": "",                 // 经办法院, String, 预先指定
        "案号": "",                    // 案号, String, 预先指定
        "成文日期": "",                // 诉讼状结尾的日期, String
        "caseId": ""
    },
    "原告": {
        "total": 2,
        "data": [               // 原告信息列表. 字段与被告, 第三人相同
            {   
                "类型": "自然人",        // 类型为"自然人"
                "名称": "",   // 姓名 -> 名称
                "性别": "",
                "年龄": "",
                "出生日期": "",
                "身份": "",
                "国籍": "",
                "地址": "",
                "民族": "",
                "证件类型": "",
                "证件号码": "",
                "联系电话": "",
                "政治面貌": "",
				"文化程度": "",
            },
            {
                "类型": "单位",     // 类型为"单位"
                "名称": "",   // 单位名称 -> 名称
                "法定代表人": "",
                "职务": "",
                "住所": "",
                "社会信用代码": "",
                "联系电话": "",
            }
        ]
    },
    "被告": {
        "total": 2,
        "data": [               
            {   
                "类型": "自然人",
                "名称": "",
                "性别": "",
                "年龄": "",
                "出生日期": "",
                "身份": "",
                "国籍": "",
                "地址": "",
                "民族": "",
                "证件类型": "",
                "证件号码": "",
                "联系电话": "",
                "政治面貌": "",
                "文化程度": "",
            },
            {           
                "类型": "单位",         
                "名称": "",
                "法定代表人": "",
                "职务": "",
                "住所": "",
                "社会信用代码": "",
                "联系电话": "",
            }
        ]
    },
    "第三人": {
        "total": 2,
        "data": [               // 自然人原告信息列表
            {   
                "类型": "自然人",
                "名称": "",
                "性别": "",
                "年龄": "",
                "出生日期": "",
                "身份": "",
                "国籍": "",
                "地址": "",
                "民族": "",
                "证件类型": "",
                "证件号码": "",
                "联系电话": "",
                "政治面貌": "",
                "文化程度": "",
            },
            {
                "类型": "单位",
                "名称": "",
                "法定代表人": "",
                "职务": "",
                "住所": "",
                "社会信用代码": "",
                "联系电话": ""
            }
        ]
    },
	"案由": "" ,                      // 案由, 单行文本, String
	"诉讼请求": [
        {
            "内容": ""                // 
        }
    ]
}
```

### 1.3 外网测试接口

1. 接口地址:

    ```
    http://119.23.146.211:7009/api/v1/i/app/dossier/court/cases/info/
    ```

2. 接口请求方式: `POST` 
3. 接口请求数据格式: `Json (utf-8 编码)`
4. 接口请求 Json 示例:

    请见 1.2

5. 返回内容:

    - 请求成功时, 返回状态码 `200` 响应, 返回如下 json:

        ```json
        {           
            "status": "ok",                         // 表示响应处理成功. 但以状态码为准
            "data": {
                "case_id": "2161698536465796"       // 收到的案件号
            }
        }
        ```

    - 请求错误时, 返回状态码 `400` 响应, 响应内容中携带错误信息. 例如

        ```
        Status Code: 400
        Content: 请求的 JSON 数据无法解析
        ```

    - 服务器内部错误时, 返回状态码 `500` 响应, 响应内容中携带错误信息

6. 异常处理:

    - 如果服务器返回 `400` 响应, 请根据提示信息修正请求后重试
    - 如果服务器返回 `500` 响应, 可能要联系网站管理
    - 如果服务器 `1s(1000ms)` 内无响应, 请重试一到两次


## 2. 已有接口

### 1. 通过案件 id 查询卷宗分类信息

`/court/files/queryClassifyFiles?caseId=4772841589876`

### 2. 通过文件 id 下载图片

`/court/download/downloadFile?fileID=284667179594692`

### 3. 上传文书文件

`/court/caseTmp/uploadFile`


## 2. 前后端接口

### 2.1 获取案件信息

1. 请求地址: 

    ```
    http://ip:port/api/v1/court/cases/info/
    ```

2. 请求方式: `HTTP GET` 请求
3. 请求参数:

    |字段|字段名称|参数类型|是否必填|后端默认值|说明|
    |:--|:---|:------|:------|:--|:--|
    |`id`| 案件 id | Int | 是 | 无 |  |
    |`uid2`| 案件 uid, 是卷宗系统的 id | String | 否 | 无 |  |

4. 返回响应:

    - 请求处理成功时, 返回 `200` 响应, 返回 Json 响应, `data` 字段详见 5:

        ```json
        {           
            "status": "ok",                         // 表示响应处理成功. 但以状态码为准
            "data": {}                      
        }
        ```

    - 请求出错时, 返回 `400` 响应, 响应内容是出错信息, 例如:

        ```
        Status Code: 400
        Content: 指定的案件不存在或已删除
        ```

    - 服务器内部错误时, 返回 `500` 响应

5. Json `data` 字段:

    ```json
    {
        "基本信息": {
            "案件名称": "",                 // String
            "案号": "",                    // String
            "收案日期": "",                 // String, 格式: 2018-02-01 
            "立案日期": "",                 // String, 格式: 2018-02-01 
            "案件阶段": "",                // 阶段名称, String
            "stage_id": 1,               // 阶段 id, Int
            "案件类别": "",                 // String, 新收案件, 历史案件
        },
        "立案组庭信息": {
            "经办法院": "",                  // 经办法院名称, String
            "court_id": 1,                // 经办法院id, Int
            "所属庭室": "",                 // 所属庭室名称, String
            "dept_id": 1,                  // 所属庭室id, Int
            "组合庭室": "",                  // 组合庭室类型, 合议庭或独任庭

            // 合议庭
            "首席法官": "",                  // 首席法官名称, String
            "法官": "",                    // 法官名称, String 
            "书记员": "",                  // 书记员名称, String

            // 独任庭
            "法官": "",                    // 法官名称, String 
            "书记员": "",                  // 书记员名称, String

            "成文日期": "",                // String, 格式: 2018-02-01
        },
        "原告": [               // 原告信息列表. 字段与被告, 第三人相同
            {   
                "type": "person",
                "类型": "自然人",                   // 类型为"自然人"

                "is_repr": true,                 // 是否诉讼代表人, 非诉讼代表人时, 这个属性可能没有 为 undefined, false                

                "名称": "",                        // String
                "性别": "",
                "出生日期": "",                     // String, 格式: 2018-02-01
                "身份": "",
                "国籍": "",
                "当前居住地址": "",
                "联系地址": "",
                "原籍": "",
                "民族": "",
                "邮编": "",
                "证件类型": "",
                "证件号码": "",
                "联系电话": "",
                "政治面貌": "",
                "文化程度": "",
            },
            {
                "type": "organization",
                "类型": "单位",     // 类型为"单位"  // String
                "名称": "",   // 单位名称 -> 名称   // String
                "法定代表人": "",                    // String
                "职务": "",                       // String
                "住所": "",                       // String
                "社会信用代码": "",                 // String
                "联系电话": "",                     // String 
                "单位类型": "",                     // String
                "经济类型": "",                     // String
                "隶属类型": "",                     // String
            }
        ],
        "被告": [],
        "第三人": [],
        "委托代理人": [
            {
                "类型": "原告代理人",               // 委托代理人类型: 原告代理人, 被告代理人, 第三人代理人
                "姓名": "黄荣贵",
                "代理权限": "一般代理",            // 代理权限, 一般代理, 代理授权
                "证件类型": "",                   // String,
                "证件号码": "",                   // String
                "代理人身份": "",                   // String
                "代理类型": "委托代理",             // String
                "与被代理人关系": "",              // String
                "工作单位": "",                     // String
                "职务": "",                       // String
                "固定电话": "",                     // String
                "移动电话": "",                     // String
                "其他联系方式": "",                   // String
                "描述": ""                        // String
            }
        ],
        "事实和理由": "" ,                      // 案由, 单行文本, String
        "诉讼请求": [
            {
                "内容": "",                // String, 多行文本
                "案由": ""
            }
        ]
    }
    ```